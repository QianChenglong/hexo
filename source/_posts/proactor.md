---
title: proactor
tags: [proactor]
date: 2016-03-08 19:12:23
---

与Reactor模型相对应，Proactor最大的特点是使用异步I/O。所有的I/O操作都交由系统提供的异步I/O接口去执行。Proactor多路复用器等待异步I/O完成，并调用相应的用户处理函数。为了对比Reactor模型，以一个read操作为例：

在Reactor中：
-   将要读的文件描述符注册到多路复用器中。
-   多路复用器等待上述描述符的可读事件以及其它所有已经注册过的事件。
-   描述符变成可读之后，多路复用器返回，并调用用户提供的处理函数，开始读文件操作。

在Proactor中：

-   用户函数启动一个异步读文件的操作。同时将这个操作注册到多路复用器上。多路复用器并不关心文件是否可读而是关心这个异步读操作是否完成。
-   异步读文件是操作系统完成，用户程序不需要关心。多路复用器等待直到有完成通知到来。
-   当操作系统完成了读文件操作——将读到的数据复制到了用户先前提供的缓冲区之后，通知多路复用器读操作已完成。
-   多路复用器再调用相应的处理程序，处理数据。
